!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.$wrap=t(l),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.$clone=null,this.init()}var i="qor.action",n="enable."+i,a="disable."+i,s="click."+i,r="change."+i,o="submit."+i,l=".qor-action-wrap";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on(s,t.proxy(this.click,this)),this.$element.on(r,t.proxy(this.change,this)),this.$wrap.on(o,"form",t.proxy(this.submit,this)),t(".qor-table-container").on(s,"tr",this.click)},unbind:function(){this.$element.off(s,this.check),this.$element.off(r,this.change),this.$element.off(o,this.submit)},click:function(e){var i=t(e.target);if(t(this).is("tr")&&!i.is("a")){var n=t(this).find("td").first();if(n.find(".mdl-checkbox__input").get(0)){var a=n.find(".mdl-js-checkbox");return a.toggleClass("is-checked"),n.parents("tr").toggleClass("is-selected"),n.find("input").prop("checked",a.hasClass("is-checked")),!1}}},change:function(e){var i=t(e.target);if(i.is(".qor-js-selector")){var n=i.parents(".qor-slideout").get(0)?i.parents(".qor-slideout"):t("body");if(n.find(".qor-action-wrap .qor-js-form").hide(),n.find('.qor-action-wrap .qor-js-form[data-action="'+i.val()+'"]').show(),!i.parents(".qor-slideout").get(0)){var a=t(".qor-page__header").outerHeight()+24;t(".qor-page__body").css({"padding-top":a})}t.proxy(this.appendCheckbox,i)()}},submit:function(e){var i=t(e.target);"index"===i.data("mode")&&t.proxy(this.appendCheckInputs,i)();var n=i.find("button");return i.find("qor-js-loading").show(),t.ajax(i.prop("action"),{method:i.prop("method"),data:new FormData(i.get(0)),processData:!1,contentType:!1,beforeSend:function(){n.prop("disabled",!0)},success:function(){location.reload()},error:function(e,n,a){var s;422===e.status?(i.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),s=t(e.responseText).find(".qor-error"),i.before(s),s.find("> li > label").each(function(){var e=t(this),n=e.attr("for");n&&i.find("#"+n).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))})):window.alert([n,a].join(": "))},complete:function(){n.prop("disabled",!1)}}),!1},destroy:function(){this.unbind(),this.$element.removeData(i)},appendCheckbox:function(){if(t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("td").remove()}),t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("th").remove()}),t(".qor-table-container tr.is-selected").removeClass("is-selected"),t(this).val()){t(".qor-page__body table").addClass("mdl-data-table--selectable"),window.newQorMaterialDataTable=new window.MaterialDataTable(t(".qor-page__body table").get(0)),t('thead.is-hidden tr th:not(".mdl-data-table__cell--non-numeric")').clone().prependTo(t('thead:not(".is-hidden") tr'));var e=t('thead:not(".is-fixed") .mdl-checkbox__input').parents("label");e.find("span").remove(),window.newQorMaterialCheckbox=new window.MaterialCheckbox(e.get(0)),e.click(function(){return t("thead.is-fixed tr th").eq(0).find("label").click(),t(this).toggleClass("is-checked"),!1})}else t(".qor-page__body table.mdl-data-table--selectable").removeClass("mdl-data-table--selectable"),t(".qor-page__body tr.is-selected").removeClass("is-selected")},appendCheckInputs:function(){var e=t(this);e.find("input.js-primary-value").remove(),t(".qor-page__body .mdl-checkbox__input:checked").each(function(i,n){var a=t(n).parents("tr").data("primary-key");e.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+a+'" />')})}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var a,s=t(this),r=s.data(i);r||s.data(i,r=new e(this,n)),"string"==typeof n&&t.isFunction(a=r[n])&&a.call(r)})},t(function(){var i=".qor-js-action",s={};t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target),s)}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.autoheight",n="enable."+i,a="disable."+i,s="input";return e.prototype={constructor:e,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on(s,t.proxy(this.resize,this))},unbind:function(){this.$element.off(s,this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var a,s=t(this),r=s.data(i);if(!r){if(/destroy/.test(n))return;s.data(i,r=new e(this,n))}"string"==typeof n&&t.isFunction(a=r[n])&&a.apply(r)})},t(function(){var i="textarea.qor-js-autoheight";t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.chooser",n="enable."+i,a="disable."+i;return e.prototype={constructor:e,init:function(){var t=this.$element;t.prop("multiple")||(t.children("[selected]").length?t.prepend('<option value=""></option>'):t.prepend('<option value="" selected></option>')),t.chosen({allow_single_deselect:!0,search_contains:!0,disable_search_threshold:10,width:"100%"})},destroy:function(){this.$element.chosen("destroy").removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var a,s=t(this),r=s.data(i);if(!r){if(!t.fn.chosen)return;if(/destroy/.test(n))return;s.data(i,r=new e(this,n))}"string"==typeof n&&t.isFunction(a=r[n])&&a.apply(r)})},t(function(){var i='select[data-toggle="qor.chooser"]';t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function i(e){var i,n={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(n[String(i).toLowerCase()]=e[i]);return n}function n(i,n){var a=String(n),s=a.toLowerCase(),r=a.toUpperCase(),o=e(a);return t.isPlainObject(i)?i[s]||i[o]||i[r]:void 0}function a(e,i){return"string"==typeof e&&"object"==typeof i&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function s(e,i){this.$element=t(e),this.options=t.extend(!0,{},s.DEFAULTS,t.isPlainObject(i)&&i),this.data=null,this.init()}var r=window.URL||window.webkitURL,o="qor.cropper",l="enable."+o,d="disable."+o,c="change."+o,h="click."+o,u="shown.qor.modal",f="hidden.qor.modal",p=".qor-cropper__toggle",m=".qor-cropper__canvas",g=".qor-cropper__wrapper",v=".qor-cropper__options",b=".qor-cropper__save";return s.prototype={constructor:s,init:function(){var e,i,n=this.options,a=this.$element,s=a.closest(n.parent);s.length||(s=a.parent()),this.$parent=s,this.$output=s.find(n.output),this.$list=e=s.find(n.list),e.find("img").attr("src")||e.find("ul").hide();try{i=JSON.parse(t.trim(this.$output.val()))}catch(r){}this.data=i||{},this.build(),this.bind()},build:function(){this.wrap(),this.$modal=t(a(s.MODAL,this.options.text)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t,e=this.$list;e.find("li").append(s.TOGGLE),t=e.find("img"),t.wrap(s.CANVAS),this.center(t)},unwrap:function(){var e=this.$list;e.find(p).remove(),e.find(m).each(function(){var e=t(this);e.before(e.html()).remove()})},bind:function(){this.$element.on(c,t.proxy(this.read,this)),this.$list.on(h,t.proxy(this.click,this)),this.$modal.on(u,t.proxy(this.start,this)).on(f,t.proxy(this.stop,this))},unbind:function(){this.$element.off(c,this.read),this.$list.off(h,this.click),this.$modal.off(u,this.start).off(f,this.stop)},click:function(e){var i,n=e.target;n!==this.$list[0]&&(i=t(n),i.is("img")||(i=i.closest("li").find("img")),this.$target=i,this.$modal.qorModal("show"))},read:function(t){var e,i=t.target.files;i&&i.length&&(e=i[0],/^image\/\w+$/.test(e.type)&&r?this.load(r.createObjectURL(e)):this.$list.empty().text(e.name))},load:function(e){var i,a=this.options,r=this,o=this.$list,l=o.find("ul"),d=this.data;l.length||(l=t(s.LIST),o.html(l),this.wrap()),l.show(),i=o.find("img"),i.one("load",function(){var e,i,s,o=t(this),l=this.naturalWidth,c=this.naturalHeight,h=o.data(),u=h.sizeResolution,f=h.sizeName,p={},m={};u?(i=n(u,"width"),s=n(u,"height"),e=i/s,c*e>l?(i=l,s=i/e):(s=c,i=s*e),i*=.8,s*=.8,p={naturalWidth:l,naturalHeight:c},m={x:Math.round((l-i)/2),y:Math.round((c-s)/2),width:Math.round(i),height:Math.round(s)},r.preview(o,p,m),f&&(d.crop=!0,d[a.key]||(d[a.key]={}),d[a.key][f]=m)):r.center(o),r.$output.val(JSON.stringify(d))}).attr("src",e).data("originalUrl",e)},start:function(){var e,a,s,r=this.options,o=this.$modal,l=this.$target,d=l.data(),c=d.sizeName||"original",u=d.sizeResolution,f=t("<img>").attr("src",d.originalUrl),p=this.data,m=this,y=NaN;u&&(e=n(u,"width"),a=n(u,"height"),y=e/a),p[r.key]||(p[r.key]={}),o.trigger("enable.qor.material").find(g).html(f),s=this.getList(y),s&&o.find(v).show().append(s),f.cropper({aspectRatio:y,data:i(p[r.key][c]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){o.find(b).one(h,function(){var e,i=f.cropper("getData",!0),n=[];p.crop=!0,p[r.key][c]=i,m.imageData=f.cropper("getImageData"),m.cropData=i;try{e=f.cropper("getCroppedCanvas").toDataURL()}catch(a){}o.find(v+" input").each(function(){var e=t(this);e.prop("checked")&&n.push(e.attr("name"))}),m.output(e,n),o.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(g+" > img").cropper("destroy").remove().end().find(v).hide().find("ul").remove()},getList:function(e){var i=[];return this.$list.find("img").not(this.$target).each(function(){var a,s,r=t(this).data(),o=r.sizeResolution,l=r.sizeName;o&&(a=n(o,"width"),s=n(o,"height"),a/s===e&&i.push('<label><input type="checkbox" name="'+l+'" checked> <span>'+l+"<small>("+a+"&times;"+s+" px)</small></span></label>"))}),i.length?"<ul><li>"+i.join("</li><li>")+"</li></ul>":""},output:function(e,i){var n=this.$target;e?this.center(n.attr("src",e),!0):this.preview(n),t.isArray(i)&&i.length&&this.autoCrop(e,i),this.$output.val(JSON.stringify(this.data))},preview:function(e,i,n){var a,s=e.parent(),r=s.parent(),o=r.width(),l=r.height(),d=i||this.imageData,c=t.extend({},n||this.cropData),h=c.width/c.height,u=o,f=l;l*h>o?f=o/h:u=l*h,a=c.width/u,s.css({width:u,height:f}),e.css({maxWidth:"none",maxHeight:"none",width:d.naturalWidth/a,height:d.naturalHeight/a,marginLeft:-c.x/a,marginTop:-c.y/a}),this.center(e)},center:function(e,i){e.each(function(){function e(){var t=s.height(),e=a.height(),i="auto";t>e&&(i=(t-e)/2),a.css("margin-top",i)}var n=t(this),a=n.parent(),s=a.parent();i&&a.add(n).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(e,i){var n=this.cropData,a=this.data[this.options.key],s=this;this.$list.find("img").not(this.$target).each(function(){var r=t(this),o=r.data("sizeName");t.inArray(o,i)>-1&&(a[o]=t.extend({},n),e?s.center(r.attr("src",e),!0):s.preview(r))})},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(o)}},s.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},s.TOGGLE='<div class="qor-cropper__toggle"><i class="material-icons">crop</i></div>',s.CANVAS='<div class="qor-cropper__canvas"></div>',s.LIST="<ul><li><img></li></ul>",s.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-cropper__wrapper"></div><div class="qor-cropper__options"><p>Sync cropping result to:</p></div></div><div class="mdl-card__actions mdl-card--border"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div><div class="mdl-card__menu"><button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close"><i class="material-icons">close</i></button></div></div></div>',s.plugin=function(e){return this.each(function(){var i,n,a=t(this),r=a.data(o);if(!r){if(!t.fn.cropper)return;if(/destroy/.test(e))return;i=t.extend(!0,{},a.data(),"object"==typeof e&&e),a.data(o,r=new s(this,i))}"string"==typeof e&&t.isFunction(n=r[e])&&n.apply(r)})},t(function(){var e=".qor-file__input",i={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};t(document).on(l,function(n){s.plugin.call(t(e,n.target),i)}).on(d,function(i){s.plugin.call(t(e,i.target),"destroy")}).triggerHandler(l)}),s}),function(t,e){function i(e,i){this.currentView=0,this.minDate,this.maxDate,this._attachedEvents=[],this.element=e,this.$element=t(e),this.params={date:!0,time:!0,format:"YYYY-MM-DD",minDate:null,maxDate:null,currentDate:null,lang:"en",weekStart:0,shortTime:!1,cancelText:"Cancel",okText:"OK"},this.params=t.fn.extend(this.params,i),this.name="qor_"+this.setName(),this.$element.attr("data-dtp",this.name),this.init()}var n="materialDatePicker",a="plugin_"+n;e.locale("en"),t.fn[n]=function(e,n){return this.each(function(){t.data(this,a)?("function"==typeof t.data(this,a)[e]&&t.data(this,a)[e](n),"destroy"===e&&delete t.data(this,a)):t.data(this,a,new i(this,e))}),this},i.prototype={init:function(){this.initDays(),this.initDates(),this.initTemplate(),this.initButtons(),this._attachEvent(t(window),"resize",this._centerBox(this)),this._attachEvent(this.$dtpElement.find(".qor-datepicker__content"),"click",this._onElementClick.bind(this)),this._attachEvent(this.$dtpElement,"click",this._onBackgroundClick.bind(this)),this._attachEvent(this.$dtpElement.find(".qor-close > a"),"click",this._onCloseClick.bind(this)),this._attachEvent(this.$element,"focus",this._onFocus.bind(this))},initDays:function(){this.days=[];for(var t=this.params.weekStart;this.days.length<7;t++)t>6&&(t=0),this.days.push(t.toString())},initDates:function(){if(this.$element.val().length>0)"undefined"!=typeof this.params.format&&null!==this.params.format?this.currentDate=e(this.$element.val(),this.params.format).locale(this.params.lang):this.currentDate=e(this.$element.val()).locale(this.params.lang);else if("undefined"!=typeof this.$element.attr("value")&&null!==this.$element.attr("value")&&""!==this.$element.attr("value"))"string"==typeof this.$element.attr("value")&&("undefined"!=typeof this.params.format&&null!==this.params.format?this.currentDate=e(this.$element.attr("value"),this.params.format).locale(this.params.lang):this.currentDate=e(this.$element.attr("value")).locale(this.params.lang));else if("undefined"!=typeof this.params.currentDate&&null!==this.params.currentDate){if("string"==typeof this.params.currentDate)"undefined"!=typeof this.params.format&&null!==this.params.format?this.currentDate=e(this.params.currentDate,this.params.format).locale(this.params.lang):this.currentDate=e(this.params.currentDate).locale(this.params.lang);else if("undefined"==typeof this.params.currentDate.isValid||"function"!=typeof this.params.currentDate.isValid){var t=this.params.currentDate.getTime();this.currentDate=e(t,"x").locale(this.params.lang)}else this.currentDate=this.params.currentDate;this.$element.val(this.currentDate.format(this.params.format))}else this.currentDate=e();if("undefined"!=typeof this.params.minDate&&null!==this.params.minDate)if("string"==typeof this.params.minDate)"undefined"!=typeof this.params.format&&null!==this.params.format?this.minDate=e(this.params.minDate,this.params.format).locale(this.params.lang):this.minDate=e(this.params.minDate).locale(this.params.lang);else if("undefined"==typeof this.params.minDate.isValid||"function"!=typeof this.params.minDate.isValid){var t=this.params.minDate.getTime();this.minDate=e(t,"x").locale(this.params.lang)}else this.minDate=this.params.minDate;if("undefined"!=typeof this.params.maxDate&&null!==this.params.maxDate)if("string"==typeof this.params.maxDate)"undefined"!=typeof this.params.format&&null!==this.params.format?this.maxDate=e(this.params.maxDate,this.params.format).locale(this.params.lang):this.maxDate=e(this.params.maxDate).locale(this.params.lang);else if("undefined"==typeof this.params.maxDate.isValid||"function"!=typeof this.params.maxDate.isValid){var t=this.params.maxDate.getTime();this.maxDate=e(t,"x").locale(this.params.lang)}else this.maxDate=this.params.maxDate;this.isAfterMinDate(this.currentDate)||(this.currentDate=e(this.minDate)),this.isBeforeMaxDate(this.currentDate)||(this.currentDate=e(this.maxDate))},initTemplate:function(){this.template='<div class="qor-datepicker hidden" id="'+this.name+'"><div class="qor-datepicker__content"><div class="qor-date-view"><header class="qor-header"><div class="qor-actual-day">Lundi</div><div class="qor-close"><a href="javascript:void(0);"><i class="material-icons">clear</i></</div></header><div class="qor-date hidden"><div><div class="left center p10"><a href="javascript:void(0);" class="qor-select-year-before"><i class="material-icons">chevron_left</i></a></div><span class="qor-actual-year">2014</span><div class="right center p10"><a href="javascript:void(0);" class="qor-select-year-after"><i class="material-icons">chevron_right</i></a></div></div><div><div class="left center p10"><a href="javascript:void(0);" class="qor-select-month-before"><i class="material-icons">chevron_left</i></a></div><span><span class="qor-actual-month ">MAR</span> <span class="qor-actual-num">13</span></span><div class="right center p10"><a href="javascript:void(0);" class="qor-select-month-after"><i class="material-icons">chevron_right</i></a></div></div></div><div class="qor-time hidden"><div class="qor-actual-maxtime">23:55</div></div><div class="qor-picker"><div class="qor-picker-calendar"></div><div class="qor-picker-datetime hidden"><div class="qor-actual-meridien"><div class="left p20"><a class="qor-meridien-am" href="javascript:void(0);">AM</a></div><div class="qor-actual-time p60"></div><div class="right p20"><a class="qor-meridien-pm" href="javascript:void(0);">PM</a></div></div><div class="qor-picker-clock"></div></div></div></div><div class="qor-datepicker__buttons"><button class="qor-datepicker__save mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">'+this.params.okText+'</button><button class="qor-datepicker__cancel mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">'+this.params.cancelText+"</button></div></div></div>",t("body").find("#"+this.name).length<=0&&(t("body").append(this.template),this.dtpElement=t("body").find("#"+this.name),this.$dtpElement=t(this.dtpElement))},initButtons:function(){this._attachEvent(this.$dtpElement.find(".qor-datepicker__cancel"),"click",this._onCancelClick.bind(this)),this._attachEvent(this.$dtpElement.find(".qor-datepicker__save"),"click",this._onOKClick.bind(this)),this._attachEvent(this.$dtpElement.find("a.qor-select-month-before"),"click",this._onMonthBeforeClick.bind(this)),this._attachEvent(this.$dtpElement.find("a.qor-select-month-after"),"click",this._onMonthAfterClick.bind(this)),this._attachEvent(this.$dtpElement.find("a.qor-select-year-before"),"click",this._onYearBeforeClick.bind(this)),this._attachEvent(this.$dtpElement.find("a.qor-select-year-after"),"click",this._onYearAfterClick.bind(this))},initMeridienButtons:function(){this.$dtpElement.find("a.qor-meridien-am").off("click").on("click",this._onSelectAM.bind(this)),this.$dtpElement.find("a.qor-meridien-pm").off("click").on("click",this._onSelectPM.bind(this))},initDate:function(t){this.currentView=0,this.$dtpElement.find(".qor-picker-calendar").removeClass("hidden"),this.$dtpElement.find(".qor-picker-datetime").addClass("hidden");var e="undefined"!=typeof this.currentDate&&null!==this.currentDate?this.currentDate:null,i=this.generateCalendar(this.currentDate);if("undefined"!=typeof i.week&&"undefined"!=typeof i.days){var n=this.constructHTMLCalendar(e,i);this.$dtpElement.find("a.qor-select-day").off("click"),this.$dtpElement.find(".qor-picker-calendar").html(n),this.$dtpElement.find("a.qor-select-day").on("click",this._onSelectDate.bind(this)),this.toggleButtons(e)}this._centerBox(),this.showDate(e)},initHours:function(){if(this.currentView=1,!this.params.date){var e=this.$dtpElement.find(".qor-datepicker__content").width(),i=this.$dtpElement.find(".qor-picker-clock").css("marginLeft").replace("px",""),n=this.$dtpElement.find(".qor-picker-clock").css("marginRight").replace("px",""),a=this.$dtpElement.find(".qor-picker").css("paddingLeft").replace("px",""),s=this.$dtpElement.find(".qor-picker").css("paddingRight").replace("px","");this.$dtpElement.find(".qor-picker-clock").innerWidth(e-(parseInt(i)+parseInt(n)+parseInt(a)+parseInt(s)))}this.showTime(this.currentDate),this.initMeridienButtons(),this.$dtpElement.find(".qor-picker-datetime").removeClass("hidden"),this.$dtpElement.find(".qor-picker-calendar").addClass("hidden"),this.currentDate.hour()<12?this.$dtpElement.find("a.qor-meridien-am").click():this.$dtpElement.find("a.qor-meridien-pm").click();for(var r=[],o=0;12>o;++o){var l=t("<div>",{"class":"qor-picker-time qor-picker-time-"+(o+1)}),d=12==this.currentDate.format("h")?0:this.currentDate.format("h"),c=t("<a>",{href:"javascript:void(0);","class":"qor-select-hour"}).data("hour",o).text(0==o?12:o);o==parseInt(d)&&c.addClass("selected"),l.append(c),r.push(l)}this.$dtpElement.find("a.qor-select-hour").off("click"),this.$dtpElement.find(".qor-picker-clock").html(r),this.toggleTime(!0),this.initHands(!0)},initMinutes:function(){this.currentView=2,this.showTime(this.currentDate),this.initMeridienButtons(),this.currentDate.hour()<12?this.$dtpElement.find("a.qor-meridien-am").click():this.$dtpElement.find("a.qor-meridien-pm").click(),this.$dtpElement.find(".qor-picker-calendar").addClass("hidden"),this.$dtpElement.find(".qor-picker-datetime").removeClass("hidden");for(var e=[],i=0;60>i;i+=5){var n=t("<div>",{"class":"qor-picker-time qor-picker-time-"+(i/5+1)}),a=t("<a>",{href:"javascript:void(0);","class":"qor-select-minute"}).data("minute",i).text(2==i.toString().length?i:"0"+i);i==5*Math.round(this.currentDate.minute()/5)&&(a.addClass("selected"),this.currentDate.minute(i)),n.append(a),e.push(n)}this.$dtpElement.find("a.qor-select-minute").off("click"),this.$dtpElement.find(".qor-picker-clock").html(e),this.toggleTime(!1),this.initHands(!1),this._centerBox()},initHands:function(t){this.$dtpElement.find(".qor-picker-clock").append('<div class="qor-hand qor-hour-hand"></div><div class="qor-hand qor-minute-hand"></div><div class="qor-clock-center"></div>'),this.$dtpElement.find(".qor-hour-hand").addClass(t===!0?"on":""),this.$dtpElement.find(".qor-minute-hand").addClass(t===!1?"on":""),this.animateHands(),this._centerBox()},animateHands:function(){var t=this.currentDate.hour();this.currentDate.minute();this.rotateElement(this.$dtpElement.find(".qor-hour-hand"),30*t),this.rotateElement(this.$dtpElement.find(".qor-minute-hand"),6*(5*Math.round(this.currentDate.minute()/5)))},isAfterMinDate:function(t,i,n){var a=!0;if("undefined"!=typeof this.minDate&&null!==this.minDate){var s=e(this.minDate),r=e(t);i||n||(s.hour(0),s.minute(0),r.hour(0),r.minute(0)),s.second(0),r.second(0),s.millisecond(0),r.millisecond(0),n?a=parseInt(r.format("X"))>=parseInt(s.format("X")):(r.minute(0),s.minute(0),a=parseInt(r.format("X"))>=parseInt(s.format("X")))}return a},isBeforeMaxDate:function(t,i,n){var a=!0;if("undefined"!=typeof this.maxDate&&null!==this.maxDate){var s=e(this.maxDate),r=e(t);i||n||(s.hour(0),s.minute(0),r.hour(0),r.minute(0)),s.second(0),r.second(0),s.millisecond(0),r.millisecond(0),n?a=parseInt(r.format("X"))<=parseInt(s.format("X")):(r.minute(0),s.minute(0),a=parseInt(r.format("X"))<=parseInt(s.format("X")))}return a},rotateElement:function(e,i){t(e).css({WebkitTransform:"rotate("+i+"deg)","-moz-transform":"rotate("+i+"deg)"})},showDate:function(t){t&&(this.$dtpElement.find(".qor-actual-day").html(t.locale(this.params.lang).format("dddd")),this.$dtpElement.find(".qor-actual-month").html(t.locale(this.params.lang).format("MMM").toUpperCase()),this.$dtpElement.find(".qor-actual-num").html(t.locale(this.params.lang).format("DD")),this.$dtpElement.find(".qor-actual-year").html(t.locale(this.params.lang).format("YYYY")))},showTime:function(t){if(t){var e=5*Math.round(t.minute()/5),i=(this.params.shortTime?t.format("hh"):t.format("HH"))+":"+(2==e.toString().length?e:"0"+e);this.params.date?this.$dtpElement.find(".qor-actual-time").html(i):(this.params.shortTime?this.$dtpElement.find(".qor-actual-day").html(t.format("A")):this.$dtpElement.find(".qor-actual-day").html(" "),this.$dtpElement.find(".qor-actual-maxtime").html(i))}},selectDate:function(t){t&&(this.currentDate.date(t),this.showDate(this.currentDate),this.$element.trigger("dateSelected",this.currentDate))},generateCalendar:function(t){var i={};if(null!==t){var n=e(t).locale(this.params.lang).startOf("month"),a=e(t).locale(this.params.lang).endOf("month"),s=n.format("d");i.week=this.days,i.days=[];for(var r=n.date();r<=a.date();r++){if(r===n.date()){var o=i.week.indexOf(s.toString());if(o>0)for(var l=0;o>l;l++)i.days.push(0)}i.days.push(e(n).locale(this.params.lang).date(r))}}return i},constructHTMLCalendar:function(t,i){var n="";n+='<div class="qor-picker-month">'+t.locale(this.params.lang).format("MMMM YYYY")+"</div>",n+='<table class="table qor-picker-days"><thead>';for(var a=0;a<i.week.length;a++)n+="<th>"+e(parseInt(i.week[a]),"d").locale(this.params.lang).format("dd").substring(0,1)+"</th>";n+="</thead>",n+="<tbody><tr>";for(var a=0;a<i.days.length;a++)a%7==0&&(n+="</tr><tr>"),n+='<td data-date="'+e(i.days[a]).locale(this.params.lang).format("D")+'">',0!=i.days[a]&&(n+=this.isBeforeMaxDate(e(i.days[a]),!1,!1)===!1||this.isAfterMinDate(e(i.days[a]),!1,!1)===!1?'<span class="qor-select-day">'+e(i.days[a]).locale(this.params.lang).format("DD")+"</span>":e(i.days[a]).locale(this.params.lang).format("DD")===e(this.currentDate).locale(this.params.lang).format("DD")?'<a href="javascript:void(0);" class="qor-select-day selected">'+e(i.days[a]).locale(this.params.lang).format("DD")+"</a>":'<a href="javascript:void(0);" class="qor-select-day">'+e(i.days[a]).locale(this.params.lang).format("DD")+"</a>",n+="</td>");return n+="</tr></tbody></table>"},setName:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;5>i;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},isPM:function(){return this.$dtpElement.find("a.qor-meridien-pm").hasClass("selected")},setElementValue:function(){this.$element.trigger("beforeChange",this.currentDate),"undefined"!=typeof t.material&&this.$element.removeClass("empty"),this.$element.val(e(this.currentDate).locale(this.params.lang).format(this.params.format)),this.$element.trigger("change",this.currentDate)},toggleButtons:function(t){if(t&&t.isValid()){var i=e(t).locale(this.params.lang).startOf("month"),n=e(t).locale(this.params.lang).endOf("month");this.isAfterMinDate(i,!1,!1)?this.$dtpElement.find("a.qor-select-month-before").removeClass("invisible"):this.$dtpElement.find("a.qor-select-month-before").addClass("invisible"),this.isBeforeMaxDate(n,!1,!1)?this.$dtpElement.find("a.qor-select-month-after").removeClass("invisible"):this.$dtpElement.find("a.qor-select-month-after").addClass("invisible");var a=e(t).locale(this.params.lang).startOf("year"),s=e(t).locale(this.params.lang).endOf("year");this.isAfterMinDate(a,!1,!1)?this.$dtpElement.find("a.qor-select-year-before").removeClass("invisible"):this.$dtpElement.find("a.qor-select-year-before").addClass("invisible"),this.isBeforeMaxDate(s,!1,!1)?this.$dtpElement.find("a.qor-select-year-after").removeClass("invisible"):this.$dtpElement.find("a.qor-select-year-after").addClass("invisible")}},toggleTime:function(i){if(i){this.$dtpElement.find("a.qor-select-hour").removeClass("disabled"),this.$dtpElement.find("a.qor-select-hour").removeProp("disabled"),this.$dtpElement.find("a.qor-select-hour").off("click");var n=this;this.$dtpElement.find("a.qor-select-hour").each(function(){var i=t(this).data("hour"),a=e(n.currentDate);a.hour(n.convertHours(i)).minute(0).second(0),n.isAfterMinDate(a,!0,!1)===!1||n.isBeforeMaxDate(a,!0,!1)===!1?(t(this).prop("disabled"),t(this).addClass("disabled")):t(this).on("click",n._onSelectHour.bind(n))})}else{this.$dtpElement.find("a.qor-select-minute").removeClass("disabled"),this.$dtpElement.find("a.qor-select-minute").removeProp("disabled"),this.$dtpElement.find("a.qor-select-minute").off("click");var n=this;this.$dtpElement.find("a.qor-select-minute").each(function(){var i=t(this).data("minute"),a=e(n.currentDate);a.minute(i).second(0),n.isAfterMinDate(a,!0,!0)===!1||n.isBeforeMaxDate(a,!0,!0)===!1?(t(this).prop("disabled"),t(this).addClass("disabled")):t(this).on("click",n._onSelectMinute.bind(n))})}},_attachEvent:function(t,e,i){t.on(e,i),this._attachedEvents.push([t,e,i])},_detachEvents:function(){for(var t=this._attachedEvents.length-1;t>=0;t--)this._attachedEvents[t][0].off(this._attachedEvents[t][1],this._attachedEvents[t][2]),this._attachedEvents.splice(t,1)},_onFocus:function(){this.currentView=0,this.$element.blur(),this.initDates(),this.show(),this.params.date?(this.$dtpElement.find(".qor-date").removeClass("hidden"),this.initDate()):this.params.time&&(this.$dtpElement.find(".qor-time").removeClass("hidden"),this.initHours())},_onBackgroundClick:function(t){t.stopPropagation(),this.hide()},_onElementClick:function(t){t.stopPropagation()},_onCloseClick:function(){this.hide()},_onOKClick:function(){switch(this.currentView){case 0:this.params.time===!0?this.initHours():(this.setElementValue(),this.hide());break;case 1:this.initMinutes();break;case 2:this.setElementValue(),this.hide()}},_onCancelClick:function(){if(this.params.time)switch(this.currentView){case 0:this.hide();break;case 1:this.params.date?this.initDate():this.hide();break;case 2:this.initHours()}else this.hide()},_onMonthBeforeClick:function(){this.currentDate.subtract(1,"months"),this.initDate(this.currentDate)},_onMonthAfterClick:function(){this.currentDate.add(1,"months"),this.initDate(this.currentDate)},_onYearBeforeClick:function(){this.currentDate.subtract(1,"years"),this.initDate(this.currentDate)},_onYearAfterClick:function(){this.currentDate.add(1,"years"),this.initDate(this.currentDate)},_onSelectDate:function(e){this.$dtpElement.find("a.qor-select-day").removeClass("selected"),t(e.currentTarget).addClass("selected"),this.selectDate(t(e.currentTarget).parent().data("date"))},_onSelectHour:function(e){this.$dtpElement.find("a.qor-select-hour").removeClass("selected"),t(e.currentTarget).addClass("selected");var i=parseInt(t(e.currentTarget).data("hour"));this.isPM()&&(i+=12),this.currentDate.hour(i),this.showTime(this.currentDate),this.animateHands()},_onSelectMinute:function(e){this.$dtpElement.find("a.qor-select-minute").removeClass("selected"),t(e.currentTarget).addClass("selected"),this.currentDate.minute(parseInt(t(e.currentTarget).data("minute"))),
this.showTime(this.currentDate),this.animateHands()},_onSelectAM:function(e){t(".qor-actual-meridien").find("a").removeClass("selected"),t(e.currentTarget).addClass("selected"),this.currentDate.hour()>=12&&this.currentDate.subtract(12,"hours")&&this.showTime(this.currentDate),this.toggleTime(1===this.currentView)},_onSelectPM:function(e){t(".qor-actual-meridien").find("a").removeClass("selected"),t(e.currentTarget).addClass("selected"),this.currentDate.hour()<12&&this.currentDate.add(12,"hours")&&this.showTime(this.currentDate),this.toggleTime(1===this.currentView)},convertHours:function(t){var e=t;return 12>t&&this.isPM()&&(e+=12),e},setDate:function(t){this.params.currentDate=t,this.initDates()},setMinDate:function(t){this.params.minDate=t,this.initDates()},setMaxDate:function(t){this.params.maxDate=t,this.initDates()},destroy:function(){this._detachEvents(),this.$dtpElement.remove()},show:function(){this.$dtpElement.removeClass("hidden"),this._centerBox()},hide:function(){this.$dtpElement.addClass("hidden")},resetDate:function(){},_centerBox:function(){var t=(this.$dtpElement.height()-this.$dtpElement.find(".qor-datepicker__content").height())/2;this.$dtpElement.find(".qor-datepicker__content").css("marginLeft",-(this.$dtpElement.find(".qor-datepicker__content").width()/2)+"px"),this.$dtpElement.find(".qor-datepicker__content").css("top",t+"px")}}}(jQuery,moment),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}function i(e,i){var s,r=a.search;return t.isArray(e)&&(s=n(r),t.each(e,function(e,n){e=t.inArray(n,s),-1===e?s.push(n):i&&s.splice(e,1)}),r="?"+s.join("&")),r}function n(e){var i=[];return e&&e.indexOf("?")>-1&&(e=e.split("?")[1],e&&e.indexOf("#")>-1&&(e=e.split("#")[0]),e&&(i=t.map(e.split("&"),function(e){var i,n=[];return e=e.split("="),i=e[1],n.push(e[0]),i&&(i=t.trim(decodeURIComponent(i)),i&&n.push(i)),n.join("=")}))),i}var a=window.location,s="qor.filter",r="enable."+s,o="disable."+s,l="click."+s,d="change."+s,c="is-active";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){var e=this.options;this.$element.on(l,e.label,t.proxy(this.toggle,this)).on(d,e.group,t.proxy(this.toggle,this))},unbind:function(){this.$element.off(l,this.toggle).off(d,this.toggle)},toggle:function(e){var s,r,o,l,d,h,u,f=t(e.currentTarget),p=[];f.is("select")?(s=n(a.search),l=f.attr("name"),d=f.val(),r=[l],d&&r.push(d),r=r.join("="),d&&p.push(r),f.children().each(function(){var e=t(this),i=[l],n=t.trim(e.prop("value"));return n&&i.push(n),i=i.join("="),h=t.inArray(i,s),h>-1?(u=i,!1):void 0}),u?(p.push(u),o=i(p,!0)):o=i(p)):f.is("a")&&(e.preventDefault(),p=n(f.attr("href")),o=f.hasClass(c)?i(p,!0):i(p)),a.search=o},destroy:function(){this.unbind(),this.$element.removeData(s)}},e.DEFAULTS={label:!1,group:!1},e.plugin=function(i){return this.each(function(){var n,a=t(this),r=a.data(s);if(!r){if(/destroy/.test(i))return;a.data(s,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i='[data-toggle="qor.filter"]',n={label:"a",group:"select"};t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(r,function(a){e.plugin.call(t(i,a.target),n)}).triggerHandler(r)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.$clone=null,this.init()}var i="qor.fixer",n="enable."+i,a="disable."+i,s="click."+i,r="resize."+i,o="scroll."+i,l="is-hidden",d="is-fixed";return e.prototype={constructor:e,init:function(){var e=this.options,i=this.$element;t(".qor-page__body .qor-js-table").size()>1||i.is(":hidden")||i.find("tbody > tr:visible").length<=1||(this.$thead=i.find("thead:first"),this.$tbody=i.find("tbody:first"),this.$header=t(e.header),this.$subHeader=t(e.subHeader),this.$content=t(e.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=e.paddingHeight,this.resize(),this.bind())},bind:function(){this.$element.on(s,t.proxy(this.check,this)),this.$content.on(o,t.proxy(this.toggle,this)).on(r,t.proxy(this.resize,this))},unbind:function(){this.$element.off(s,this.check),this.$content.off(o,this.toggle).off(r,this.resize)},build:function(){var e=this.$element,i=this.$thead,n=this.$clone,a=i.find("> tr").children();n||(this.$clone=n=i.clone().prependTo(e)),n.addClass([d,l].join(" ")).find("> tr").children().each(function(e){t(this).width(a.eq(e).width())})},unbuild:function(){this.$clone.remove()},check:function(e){var i,n=t(e.target);n.is(".qor-js-check-all")&&(i=n.prop("checked"),n.closest("thead").siblings("thead").find(".qor-js-check-all").prop("checked",i).closest(".mdl-checkbox").toggleClass("is-checked",i))},toggle:function(){var e=this.$element,i=this.$clone,n=this.$thead.outerHeight(),a=this.$tbody.find("tr:last").outerHeight(),s=this.$content.scrollTop(),r=0,o=e.outerHeight()-n-a,d=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,c=t(".qor-page__header").outerHeight(),h=Math.min(s-d,o)+c;s>d-c?i.css("top",h).removeClass(l):i.css("top",r).addClass(l)},resize:function(){this.build(),this.toggle()},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(i)}},e.DEFAULTS={header:!1,content:!1},e.plugin=function(n){return this.each(function(){var a,s=t(this),r=s.data(i);r||s.data(i,r=new e(this,n)),"string"==typeof n&&t.isFunction(a=r[n])&&a.call(r)})},t(function(){var i=".qor-js-table",s={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target),s)}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e){componentHandler&&(t(e).is(o)?componentHandler.upgradeElements(e):componentHandler.upgradeElements(t(o,e).toArray()))}function i(e){componentHandler&&(t(e).is(o)?componentHandler.downgradeElements(e):componentHandler.downgradeElements(t(o,e).toArray()))}var n="qor.material",a="enable."+n,s="disable."+n,r="update."+n,o='[class*="mdl-js"]';t(function(){t(document).on(a,function(t){e(t.target)}).on(s,function(t){i(t.target)}).on(r,function(t){i(t.target),e(t.target)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.transitioning=!1,this.fadable=!1,this.init()}var i=t(document),n="qor.modal",a="enable."+n,s="disable."+n,r="click."+n,o="keyup."+n,l="show."+n,d="shown."+n,c="hide."+n,h="hidden."+n,u="transitionend",f="qor-modal-open",p="shown",m="fade",g="in",v="aria-hidden";return e.prototype={constructor:e,init:function(){this.fadable=this.$element.hasClass(m),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(r,t.proxy(this.click,this)),this.options.keyboard&&i.on(o,t.proxy(this.keyup,this))},unbind:function(){this.$element.off(r,this.click),this.options.keyboard&&i.off(o,this.keyup)},click:function(e){var i=this.$element[0],n=e.target;if(n===i&&this.options.backdrop)return void this.hide();for(;n!==i;){if("modal"===t(n).data("dismiss")){this.hide();break}n=n.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(e){var n,a=this.$element;if(!this.transitioning&&!a.hasClass(g)&&(n=t.Event(l),a.trigger(n),!n.isDefaultPrevented())){if(i.find("body").addClass(f),a.addClass(p).scrollTop(0).get(0).offsetHeight,this.transitioning=!0,e||!this.fadable)return a.addClass(g),void this.shown();a.one(u,t.proxy(this.shown,this)),a.addClass(g)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(v,!1).trigger(d).focus()},hide:function(e){var n,a=this.$element;if(!this.transitioning&&a.hasClass(g)&&(n=t.Event(c),a.trigger(n),!n.isDefaultPrevented())){if(i.find("body").removeClass(f),this.transitioning=!0,e||!this.fadable)return a.removeClass(g),void this.hidden();a.one(u,t.proxy(this.hidden,this)),a.removeClass(g)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass(p).attr(v,!0).trigger(h)},toggle:function(){this.$element.hasClass(g)?this.hide():this.show()},destroy:function(){this.$element.removeData(n)}},e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.plugin=function(i){return this.each(function(){var a,s=t(this),r=s.data(n);if(!r){if(/destroy/.test(i))return;s.data(n,r=new e(this,i))}"string"==typeof i&&t.isFunction(a=r[i])&&a.apply(r)})},t.fn.qorModal=e.plugin,t(function(){var i=".qor-modal";t(document).on(r,'[data-toggle="qor.modal"]',function(){var i=t(this),a=i.data(),s=t(a.target||i.attr("href"));e.plugin.call(s,s.data(n)?"toggle":a)}).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(a,function(n){e.plugin.call(t(i,n.target))})}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e){var i=[];return t.isPlainObject(e)&&t.each(e,function(){i.push(arguments[1])}),i.join()}function i(t){var e=t&&t.split(",");return t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t}function n(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function a(e){var i,a={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(a[n(i)]=e[i]);return a}function s(e,i){return"string"==typeof e&&"object"==typeof i&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function r(e,i){this.$element=t(e),this.options=t.extend(!0,{},r.DEFAULTS,t.isPlainObject(i)&&i),this.init()}var o=t(window),l="qor.redactor",d="enable."+l,c="disable."+l,h="click."+l,u="focus."+l,f="blur."+l,p="imageupload."+l,m="imagedelete."+l,g="shown.qor.modal",v="hidden.qor.modal",b=".qor-cropper__wrapper",y=".qor-cropper__save";return r.prototype={constructor:r,init:function(){var e=this.options,i=this.$element,n=i.closest(e.parent);n.length||(n=i.parent()),this.$parent=n,this.$button=t(r.BUTTON),this.$modal=t(s(r.MODAL,e.text)).appendTo("body"),this.bind()},bind:function(){var e=this.$parent,i=t.proxy(this.click,this);this.$element.on(p,function(e,n){t(n).on(h,i)}).on(m,function(e,n){t(n).off(h,i)}).on(u,function(){e.find("img").off(h,i).on(h,i)}).on(f,function(){e.find("img").off(h,i)}),o.on(h,t.proxy(this.removeButton,this))},unbind:function(){this.$element.off(p).off(m).off(u).off(f),o.off(h,this.removeButton)},click:function(e){e.stopPropagation(),setTimeout(t.proxy(this.addButton,this,t(e.target)),1)},addButton:function(e){this.$button.prependTo(e.parent()).off(h).one(h,t.proxy(this.crop,this,e))},removeButton:function(){this.$button.off(h).detach()},crop:function(n){var s=this.options,r=n.attr("src"),o=r,l=t("<img>"),d=this.$modal;t.isFunction(s.replace)&&(o=s.replace(o)),l.attr("src",o),d.one(g,function(){l.cropper({data:i(n.attr("data-crop-options")),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){d.find(y).one(h,function(){var i=l.cropper("getData",!0);t.ajax(s.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:r,CropOptions:{original:a(i)},Crop:!0}),dataType:"json",success:function(a){t.isPlainObject(a)&&a.url&&(n.attr("src",a.url).attr("data-crop-options",e(i)).removeAttr("style").removeAttr("rel"),t.isFunction(s.complete)&&s.complete(),d.qorModal("hide"))}})})}})}).one(v,function(){l.cropper("destroy").remove()}).qorModal("show").find(b).append(l)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(l)}},r.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},r.BUTTON='<span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>',r.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-cropper__wrapper"></div></div><div class="mdl-card__actions mdl-card--border"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div><div class="mdl-card__menu"><button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close"><i class="material-icons">close</i></button></div></div></div>',r.plugin=function(e){return this.each(function(){var i,n,a=t(this),s=a.data(l);if(s)/destroy/.test(e)&&a.redactor("core.destroy");else{if(!t.fn.redactor)return;if(/destroy/.test(e))return;a.data(l,s={}),i=a.data(),a.redactor({imageUpload:i.uploadUrl,fileUpload:i.uploadUrl,initCallback:function(){i.cropUrl&&a.data(l,s=new r(a,{remote:i.cropUrl,text:i.text,parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:t.proxy(function(){this.code.sync()},this)}))},focusCallback:function(){a.triggerHandler(u)},blurCallback:function(){a.triggerHandler(f)},imageUploadCallback:function(){a.triggerHandler(p,arguments[0])},imageDeleteCallback:function(){a.triggerHandler(m,arguments[1])}})}"string"==typeof e&&t.isFunction(n=s[e])&&n.apply(s)})},t(function(){var e='textarea[data-toggle="qor.redactor"]';t(document).on(c,function(i){r.plugin.call(t(e,i.target),"destroy")}).on(d,function(i){r.plugin.call(t(e,i.target))}).triggerHandler(d)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.index=0,this.init()}var i="qor.replicator",n="enable."+i,a="disable."+i,s="click."+i,r="is-template";return e.prototype={constructor:e,init:function(){var t,e=this.$element,i=this.options,n=e.find(i.itemClass);if(this.isMultipleTemplate=e.data().isMultiple,n.length&&(n.filter(i.addClass).size()||n.filter(i.delClass).size())){t=n.filter(i.newClass),t.length||(t=n.last()),t.trigger("disable"),this.$template=t,this.multipleTemplates={};var a=t.filter(e.children(i.childrenClass).children(i.newClass));this.isMultipleTemplate?(this.$template=a,t.remove(),e.children(i.childrenClass).children(i.itemClass).size()&&(this.template=a.prop("outerHTML"),this.parse())):(this.template=t.filter(e.children(i.childrenClass).children(i.newClass)).prop("outerHTML"),t.data(r,!0).hide(),this.parse()),this.bind()}},parse:function(t){var e=0;this.template&&(this.template=this.template.replace(/(\w+)\="(\S*\[\d+\]\S*)"/g,function(t,i,n){return n=n.replace(/^(\S*)\[(\d+)\]([^\[\]]*)$/,function(t,a,s,r){return t===n?("name"===i&&(e=s),a+"[{{index}}]"+r):void 0}),i+'="'+n+'"'}),t||(this.index=parseFloat(e)))},bind:function(){var e=this.options;this.$element.on(s,e.addClass,t.proxy(this.add,this)).on(s,e.delClass,t.proxy(this.del,this))},unbind:function(){this.$element.off(s,this.add).off(s,this.del)},add:function(e){var i=this.options,n=this,a=t(e.target).closest(this.options.addClass),s=a.data().template,r=a.closest(this.$element),o=r.children(i.childrenClass),l=this.$template;this.isMultipleTemplate&&this.$template.each(function(){n.multipleTemplates[t(this).data().fieldsetName]=t(this)});var d=this.multipleTemplates[s];if(this.isMultipleTemplate){if(a.length){this.template=d.prop("outerHTML"),this.parse(!0),l=t(this.template.replace(/\{\{index\}\}/g,++this.index));for(var c in a.data())if(c.match(/^sync/)){var h=c.replace(/^sync/,"");l.find("input[name*='."+h+"']").val(a.data(c))}a.closest(i.childrenClass).children("fieldset").size()?a.closest(i.childrenClass).children("fieldset").last().after(l.show()):o.prepend(l.show())}}else this.$template&&this.$template.filter(o.children(i.newClass)).is(":hidden")?this.$template.filter(o.children(i.newClass)).show():a.length&&(l=t(this.template.replace(/\{\{index\}\}/g,++this.index)),a.before(l.show()));l&&l.trigger("enable"),e.stopPropagation()},del:function(e){var i,n=this.options,a=t(e.target).closest(n.itemClass);a.is(n.newClass)?a.trigger("disable").remove():(a.children(":visible").addClass("hidden").hide(),i=t(n.alertTemplate.replace("{{name}}",this.parseName(a))),i.find(n.undoClass).one(s,function(){i.remove(),a.children(".hidden").removeClass("hidden").show()}),a.append(i))},parseName:function(t){var e=t.find("input[name]").attr("name");return e?e.replace(/[^\[\]]+$/,""):void 0},destroy:function(){this.unbind(),this.$element.removeData(i)}},e.DEFAULTS={itemClass:!1,newClass:!1,addClass:!1,delClass:!1,childrenClass:!1,alertTemplate:""},e.plugin=function(n){return this.each(function(){var a,s=t(this),r=s.data(i);r||s.data(i,r=new e(this,n)),"string"==typeof n&&t.isFunction(a=r[n])&&a.call(r)})},t(function(){var i=".qor-fieldset-container",s={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'};t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target),s)}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e,i){this.options=i,this.$element=t(e),this.init()}var i=t(document),n="qor.selector",a="enable."+n,s="disable."+n,r="click."+n,o="open",l="active",d="selected",c="disabled",h="clearable",u="."+d,f=".qor-selector-toggle",p=".qor-selector-label",m=".qor-selector-clear",g=".qor-selector-menu";return e.prototype={constructor:e,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var i=this.$element,n=t(e.TEMPLATE),a=this.options.aligned+"-aligned",s={};n.addClass(a).find(g).html(function(){var e=[];return i.children().each(function(){var i=t(this),n=i.attr("selected"),a=i.attr("disabled"),r=i.attr("value"),o=i.text(),l=[];n&&(l.push(d),s.value=r,s.label=o),a&&l.push(c),e.push("<li"+(l.length?' class="'+l.join(" ")+'"':"")+' data-value="'+r+'" data-label="'+o+'">'+o+"</li>")}),e.join("")}),this.$selector=n,i.hide().after(n),this.pick(s,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(r,t.proxy(this.click,this)),i.on(r,t.proxy(this.close,this))},unbind:function(){this.$selector.off(r,this.click),i.off(r,this.close)},click:function(e){var i=t(e.target);e.stopPropagation(),i.is(m)?this.clear():i.is("li")?(i.hasClass(d)||i.hasClass(c)||this.pick(i.data()),this.close()):i.closest(f).length&&this.open()},pick:function(t,e){var i=this.$selector,n=!!t.value;i.find(f).toggleClass(l,n).toggleClass(h,n&&this.options.clearable).find(p).text(t.label||this.placeholder),e||(i.find(g).children('[data-value="'+t.value+'"]').addClass(d).siblings(u).removeClass(d),this.$element.val(t.value).trigger("change"))},clear:function(){this.$selector.find(f).removeClass(l).removeClass(h).find(p).text(this.placeholder).end().end().find(g).children(u).removeClass(d),this.$element.val("").trigger("change")},open:function(){i.triggerHandler(r),this.$selector.addClass(o)},close:function(){this.$selector.removeClass(o)},destroy:function(){this.unbuild(),this.$element.removeData(n)}},e.DEFAULTS={aligned:"left",clearable:!1},e.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',e.plugin=function(i){return this.each(function(){var a,s,r=t(this),o=r.data(n);if(!o){if(/destroy/.test(i))return;a=t.extend({},e.DEFAULTS,r.data(),"object"==typeof i&&i),r.data(n,o=new e(this,a))}"string"==typeof i&&t.isFunction(s=o[i])&&s.apply(o)})},t(function(){var i='[data-toggle="qor.selector"]';t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(a,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(a)}),e}),$.fn.qorSliderAfterShow={},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.slided=!1,this.disabled=!1,this.init()}var i=t(document),n=window.FormData,a="qor.slideout",s="enable."+a,r="disable."+a,o="keyup."+a,l="click."+a,d="submit."+a,c="show."+a,h="shown."+a,u="hide."+a,f="hidden."+a,p="transitionend",m="qor-slideout-open",g="is-shown",v="is-slided",b="is-selected",y=".mdl-layout__content.qor-page",q=".qor-actions__locale";return e.prototype={constructor:e,init:function(){this.build(),this.bind()},build:function(){var i;this.$slideout=i=t(e.TEMPLATE).appendTo("body"),this.$title=i.find(".qor-slideout__title"),this.$body=i.find(".qor-slideout__body")},unbuild:function(){this.$title=null,this.$body=null,this.$slideout.remove()},bind:function(){this.$slideout.on(d,"form",t.proxy(this.submit,this)),i.on(o,t.proxy(this.keyup,this)).on(l,t.proxy(this.click,this))},unbind:function(){this.$slideout.off(d,this.submit),i.off(o,this.keyup).off(l,this.click)},keyup:function(t){27===t.which&&this.hide()},click:function(e){function i(){r.find("tbody > tr").removeClass(b),a.addClass(b)}var n,a,s,r=this.$element,o=this.$slideout.get(0),l=e.target;if(!e.isDefaultPrevented())for(;l!==document&&(n=!1,a=t(l),!a.prop("disabled"))&&l!==o;){if("slideout"===a.data("dismiss")){this.hide();break}if(a.is("table.qor-table > tbody > tr[data-url]")){if(t(e.target).parents(".qor-table__actions").size()>0)return;this.loading||a.hasClass(b)||(r.one(c,i),s=a.data(),this.load(s.url));break}if(a.data("url")){e.preventDefault(),s=a.data(),this.load(s.url,s);break}if(a.is("a"))break;if(!l)break;l=l.parentNode}},submit:function(e){var i=this.$slideout,a=this.$body,s=e.target,r=t(s),o=this,l=r.find(":submit");n&&(e.preventDefault(),t.ajax(r.prop("action"),{method:r.prop("method"),data:new n(s),processData:!1,contentType:!1,beforeSend:function(){l.prop("disabled",!0)},success:function(){var t=r.data("returnUrl");t?o.load(t):o.refresh()},error:function(e,n,s){var o;422===e.status?(a.find(".qor-error").remove(),r.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),o=t(e.responseText).find(".qor-error"),r.before(o),o.find("> li > label").each(function(){var e=t(this),i=e.attr("for");i&&r.find("#"+i).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))}),i.scrollTop(0)):window.alert([n,s].join(": "))},complete:function(){l.prop("disabled",!1)}}))},load:function(e,i){var n,a,s,r=this.options;e&&!this.loading&&(this.loading=!0,i=t.isPlainObject(i)?i:{},n=i.method?i.method:"GET",a=i.datatype?i.datatype:"html",delete i.url,delete i.method,delete i.datatype,s=t.proxy(function(){t.ajax(e,{method:n,data:i,dataType:a,success:t.proxy(function(a){var s,o;if("GET"===n){if(s=t(a),o=s.find(y),!o.length)return;if(o.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),this.$title.html(s.find(r.title).html()),this.$body.html(o.html()),this.$body.find(q).remove(),this.$slideout.one(h,function(){t(this).trigger("enable")}).one(f,function(){t(this).trigger("disable")}),this.show(),t(".qor-datetime-picker").materialDatePicker({format:"YYYY-MM-DD HH:mm"}),t(".qor-date-picker").materialDatePicker({format:"YYYY-MM-DD",time:!1}),r.afterShow){var l=t.fn.qorSliderAfterShow;for(var d in l)l.hasOwnProperty(d)&&l[d].call(this,e)}}else i.returnUrl?(this.loading=!1,this.load(i.returnUrl)):this.refresh()},this),error:t.proxy(function(e){var i;i=t(".qor-error span").size()>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):e.responseText,window.alert(e.responseText)},this),complete:t.proxy(function(){this.loading=!1},this)})},this),this.slided?(this.hide(),this.$slideout.one(f,s)):s())},show:function(){var e,i=this.$slideout;this.slided||(e=t.Event(c),i.trigger(e),e.isDefaultPrevented()||(i.addClass(g).get(0).offsetWidth,i.one(p,t.proxy(this.shown,this)).addClass(v).scrollTop(0)))},shown:function(){this.slided=!0,t("body").addClass(m),this.$slideout.trigger(h)},hide:function(){var e,i=this.$slideout;this.slided&&(e=t.Event(u),i.trigger(e),e.isDefaultPrevented()||i.one(p,t.proxy(this.hidden,this)).removeClass(v))},hidden:function(){this.slided=!1,t("body").removeClass(m),this.$element.find("tbody > tr").removeClass(b),this.$slideout.removeClass(g).trigger(f)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},toggle:function(){this.slided?this.hide():this.show()},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(a)}},e.DEFAULTS={title:!1,content:!1},e.TEMPLATE='<div class="qor-slideout"><div class="qor-slideout__header"><button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout"><span class="material-icons">close</span></button><h3 class="qor-slideout__title"></h3></div><div class="qor-slideout__body"></div></div>',e.plugin=function(i){return this.each(function(){var n,s=t(this),r=s.data(a);if(!r){if(/destroy/.test(i))return;s.data(a,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i=".qor-theme-slideout",n={title:".qor-form-title, .mdl-layout-title",afterShow:t.fn.qorSliderAfterShow?t.fn.qorSliderAfterShow:null};t(document).on(s,function(a){/slideout/.test(a.namespace)&&e.plugin.call(t(i,a.target),n)}).on(r,function(n){/slideout/.test(n.namespace)&&e.plugin.call(t(i,n.target),"destroy")}).triggerHandler(s)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n="qor.sorter",a="enable."+n,s="disable."+n,r="click."+n,o="is-sortable";return e.prototype={constructor:e,init:function(){this.$element.addClass(o),this.bind()},bind:function(){this.$element.on(r,"> thead > tr > th",t.proxy(this.sort,this))},unbind:function(){this.$element.off(r,this.sort)},sort:function(e){var n=t(e.currentTarget),a=n.data("orderBy"),s=i.search,r="order_by="+a;a&&(/order_by/.test(s)?s=s.replace(/order_by(=\w+)?/,function(){return r}):s+=s.indexOf("?")>-1?"&"+r:r,i.search=s)},destroy:function(){this.unbind(),this.$element.removeClass(o).removeData(n)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var a,s=t(this),r=s.data(n);if(!r){if(/destroy/.test(i))return;s.data(n,r=new e(this,i))}"string"==typeof i&&t.isFunction(a=r[i])&&a.apply(r)})},t(function(){var i=".qor-js-table";t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(a,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(a)}),e});